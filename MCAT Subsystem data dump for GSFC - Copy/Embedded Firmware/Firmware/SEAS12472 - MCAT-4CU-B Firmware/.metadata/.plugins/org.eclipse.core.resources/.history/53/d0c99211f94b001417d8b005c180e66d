/*
 * mcat_timing.h
 *
 *  Created on: Oct 3, 2014
 *      Author: samudra
 */

#ifndef MCAT_TIMING_H_
#define MCAT_TIMING_H_

int TSRD = 623; //default Time Slice Reference (TSR) value .147mS/.147mS/.147mS NANO54415 DMATIMER4 (matlab) 10/2/14
int TSR = TSRD; //utilize default produced

//default values
int MCHCD = 0;
int TPHCD = 14;
int TPLCD = 29;
int MCLCD = 44;
int EOCCD = 99954; //default values above give F=1 Hz.
int EOCCD50 = 1954; //test case for 50 Hz.

//assigning timing components for this implementation
int MCHC = MCHCD;
int TPHC = TPHCD;
int TPLC = TPLCD;
int MCLC = MCLCD;
int EOCC = EOCCD;



// Safe copy of the DMATIMER4 matlab run

/*
 * NANO54415) DMA Timer Calc V2 for MCAT-4CU-B-V2K1
Samudra Haque (samudra@gwu.edu)
02-Oct-2014 16:08:01

[Chosen Impulse Timing Components]

t1    = 0.147 mS        (Pre-TP MC activation)
t2    = 0.147 mS        (TP activiation)
t3    = 0.147 mS        (Post TP MC activation)
tr    = 0.0008 mS    (assumed rise-time)
tf    = 0.0008 mS    (assumed fall time)
tpre  = 0.0024 mS    (assumed time for sensor/startup)
tpost = 0.0024 mS    (assumed time for sensor/shutdown)


[SINGLE SHOT PULSE]

Active Time (ta): 0.0004514

Events (inclusive of rise/fall times):
MCH 0 mS
TPH 0.1478 mS
TPL 0.2956 mS
MCL 0.4434 mS

[CONTINUOUS OPERATION]

Full Cycles: 2215
Partial Cycles: 0.330084
Idle Time per period (td): 6.72686e-05 mS
Active Time, per period (ta): 0.0004514

Events (inclusive of rise/fall times):
MCH 0 mS
TPH 0.1478 mS
TPL 0.2956 mS
MCL 0.4434 mS
EOC 0.451467 mS
Checking Total time period for 2215 full cycles is: 1 seconds

[MCF54415 DMA TIMER and Interrupt Count Values]

Time Step (TSR): 10 uS
REFVAL: 623
DIVIDER:1
PRESCALER:1

[TS Counter Values (MCHC, TPHC, TPLC, MCLC, EOCC)]
in ascending order of event time

         0         0
    0.0001   14.0000
    0.0003   29.0000
    0.0004   44.0000
    0.0005   45.0000

[Table of Frequency vs td (TS Counts)]
           1       99954
           2       49954
           3       33288
           4       24954
           5       19954
           6       16621
           7       14240
           8       12454
           9       11065
          10        9954
          11        9045
          12        8288
          13        7647
          14        7097
          15        6621
          16        6204
          17        5837
          18        5510
          19        5218
          20        4954
          21        4716
          22        4500
          23        4302
          24        4121
          25        3954
          26        3801
          27        3658
          28        3526
          29        3403
          30        3288
          31        3180
          32        3079
          33        2985
          34        2896
          35        2812
          36        2732
          37        2657
          38        2586
          39        2518
          40        2454
          41        2393
          42        2335
          43        2280
          44        2227
          45        2177
          46        2128
          47        2082
          48        2038
          49        1995
          50        1954*/


#endif /* MCAT_TIMING_H_ */
